groups:
	cfengine_master = ( 10.20.24.83 )
	cfservers = ( 
			almcf21
			caicf20 
			kualincf20
			lagcf20
			luacf20
			loncf21
			oslcf21 
			percf20
			sinfs21
			vilcf20 
			)
	#site specific servers
        KUL = ( Strcmp("kua.pgs.com","${domain}") IPRange(10.26.32.0/20) IPRange(10.28.16.0/20) IPRange(10.26.16.0/20) )
        PER = ( Strcmp("perth.pgs.com","${domain}") IPRange(10.23.0.0/16) IPRange(157.147.224.126/25) )
        LON = ( Strcmp("london.pgs.com","${domain}") IPRange(10.21.0.0/16) IPRange(157.147.168.0/22) IPRange(172.21.212.0/22) IPRange(172.16.21.0/25) )
        OSL = ( Strcmp("oslo.pgs.com","${domain}") IPRange(10.30.16.0/20) IPRange(10.30.32.0/20) IPRange(172.30.128.0/20) )
        RIO = ( Strcmp("rio.pgs.com","${domain}") IPRange(172.24.0.0/16) IPRange(10.24.32.0/20) IPRange(10.24.16.0/20) )
	#hou goes last so not to clobber cfservers class
        HOU = ( Strcmp("houston.pgs.com","${domain}") IPRange(10.20.0.0/16) IPRange(172.16.26.0/24) IPRange(192.168.250.0/24) cfservers )
	VH  = ( IPRange(172.16.17.0/24) )
	SIN = ( IPRange(10.27.32.0/20) IPRange(10.27.16.0/20) )
        ABZ = ( IPRange(172.16.9.0/24) )
        AUS = ( IPRange(172.16.6.0/24) )
        CAI = ( IPRange(10.22.32.0/20) IPRange(10.22.16.0/20) )
	ALM = ( IPRange(10.29.16.0/20) IPRange(10.29.32.0/20) )
	LAG = ( IPRange(10.14.16.0/20) IPRange(10.14.32.0/20) )
	LEI = ( IPRange(172.16.21.0/24) )
	LUA = ( IPRange(172.16.13.0/24) )
	smallsites = ( ABZ ALM LAG LUA VH )
        EAME       = (
                ABZ
                ALM
                CAI
                LAG
                LON
                LUA
                OSL
                )
        NSA        = (
                AUS
                HOU
                RIO
                VH
                )
        APAC       = (
                JAK
                KUL
                MUM
                PER
                SIN
                )
control:
        actionsequence = ( copy directories links files )
#	catchall_server = ( 10.20.24.83 )
	AddInstallable  = ( failure )
        domain = ( onshore.pgs.com )
	SplayTime = ( 7 )
        TrustKeysFrom = ( 10.20.24.83
			  10.14.16.100
			  10.21.16.101
			  10.21.24.152
			  10.21.24.20
			  10.22.16.17
			  10.26.16.15
			  10.27.16.25
			  10.29.16.40
			  10.30.24.8
			  172.16.13.46
			  172.16.17.50
			  172.24.4.40
					)
        any::
                workdir = ( /var/cfengine )
                configroot = ( /cfengine )
        AUS|HOU::
                server = ( 10.20.24.83 )
	ALM::
		server = (  10.29.16.40 )
        KUL::
                server = ( 10.26.16.15 )
        PER::
                server = ( percf20.onshore.pgs.com )
        LEI|LON|ABZ::
                server = ( loncf21.onshore.pgs.com )
        OSL::
                server = ( oslcf21.onshore.pgs.com )
	RIO::
		server = ( 172.24.4.40 )
        VH::
                server = ( vilcf20.onshore.pgs.com )
	SIN::
                server = ( sincf20.onshore.pgs.com )
	CAI::
		server = ( 10.22.16.17 )
	LUA::
		server = ( 172.16.13.46 )
	LAG::
		server = ( 10.14.16.100 )
	cfservers::
		server = ( 10.20.24.83 )
	!HOU.!KUL.!PER.!SIN.!VH.!LON.!ABZ.!RIO.!OSL.!AUS.!CAI.!LUA.!LAG::
		addclasses = ( NULL )
import:
	failover.cf

copy:
	any::
       		${configroot}/config/cfengine/inputs   dest=${workdir}/inputs/
                                        recurse=inf
                                        ignore=CVS
                                        server=${server}
					backup=false
					trustkey=true
					failover=failure
				#	purge=true
	failure::
                ${configroot}/config/cfengine/inputs   dest=${workdir}/inputs/
                                        recurse=inf
                                        ignore=CVS
                                        server=${catchall_server}
                                        trustkey=true
				#	purge=true	
directories:
        /var/cfengine/bin

links:
        /var/cfengine/bin/cfagent -> /usr/sbin/cfagent

files:

	/etc/cron.d/cfagent
			 	mode=644
				action=fixall
